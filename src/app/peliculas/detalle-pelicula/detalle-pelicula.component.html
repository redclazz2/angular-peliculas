@if(pelicula){
<div>
  <h2>
    {{ pelicula.titulo }} ({{
      pelicula.fechaLanzamiento | date : "dd-MMM-YYYY"
    }})
  </h2>
  <mat-chip-listbox>
    @for(genero of pelicula.generos; track $index){
    <mat-chip
      [routerLink]="['/peliculas/filtrar']"
      [queryParams]="{ generoId: genero.id }"
    >
      {{ genero.nombre }}
    </mat-chip>
    }
  </mat-chip-listbox>
  | {{ pelicula.fechaLanzamiento.toDateString() }} | Promedio: {{pelicula.promedioVoto.toFixed(1)}} | Tu voto:
  <app-rating [maximoRating]="5" (votado)="puntuar($event)" [rating]="pelicula.votoUsuario"></app-rating>

  <div style="display: flex">
    <span style="display: inline-block; margin-right: 1rem">
      <img [src]="pelicula.poster" style="width: 270px" />
    </span>

    @if(pelicula.trailer){
    <div>
      <iframe
        width="565"
        height="315"
        [src]="trailerURL"
        frameborder="0"
        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen="true"
      >
      </iframe>
    </div>
    }
  </div>

  @if(pelicula.actores){
  <div style="margin-top: 1rem">
    <h3>Actores</h3>
    <div style="display: flex; flex-direction: column">
      @for(a of pelicula.actores; track $index){
      <div style="margin-bottom: 1rem">
        <img [src]="a.foto" style="width: 50px; vertical-align: middle" />
        <span style="display: inline-block; width: 200px; margin-left: 1rem">
          {{ a.nombre }}
        </span>

        <span style="display: inline-block; width: 45px"> ... </span>
        {{ a.personaje }}
      </div>
      }
    </div>
  </div>
  }

  @if(pelicula.cines){
    <h2>En los cines: </h2>
    <app-mapa [coordenadasIniciales]="coordenadas" [soloLectura]="true"></app-mapa>
  }
</div>
}@else {
<app-loading-gif></app-loading-gif>
}
